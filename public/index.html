<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Product Rating Review DApp</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header id="mainHeader">
    <h1>Product Rating Review System</h1>
  </header>

  <!-- Navigation Bar -->
<div id="navbar" style="display: none;">
  <div style="flex: 1; display: flex; align-items: center;">
    <strong style="font-size: 1.1rem;">Welcome, <span id="navUsername"></span></strong>
  </div>
  
  <div style="display: flex; gap: 10px;">
    <button onclick="goHome()">Home</button>
    <button onclick="handleViewProducts()">View Products</button>
    <button onclick="showAddProduct()" id="addProductBtn" style="display: none;">Add Product</button>
    <button onclick="logout()">Logout</button>
  </div>
</div>


  <!-- Role Selection Section -->
   <div id="roleWrapper">
    <div id="roleSelectionSection">
      <h2>Select Role</h2>
      <button type="button" onclick="showLogin('admin')">Admin</button>
      <button type="button" onclick="showLogin('user')">User</button>
    </div>
   </div>
    

  <!-- Login Section -->
  <div id="loginSection" style="display:none;">
    <h2>Login as <span id="loginRoleName"></span></h2>

    <div id="loginForm">
      <label for="username">Username:</label><br />
      <input id="username" placeholder="Username" autocomplete="off" /><br />

      <label for="password">Password:</label><br />
      <input id="password" type="password" placeholder="Password" autocomplete="off" /><br />

      <button type="button" onclick="login()">Login</button>
      <button type="button" onclick="cancelLogin()">Cancel</button>

      <button id="showRegisterBtn" type="button" onclick="showRegister()" style="display:none; margin-left:10px;">
        Register
      </button>
    </div>

    <div id="registerForm" style="display:none; margin-top: 10px;">
      <label for="regUsername">New Username:</label><br />
      <input id="regUsername" placeholder="New Username" autocomplete="off" /><br />

      <label for="regPassword">New Password:</label><br />
      <input id="regPassword" type="password" placeholder="New Password" autocomplete="off" /><br />

      <button type="button" onclick="registerUser()">Register</button>
      <button type="button" onclick="showLogin(currentUserRole)">Back to Login</button>
    </div>
  </div>

  <section id="homeSection" style="display: none; padding: 20px;">
    <h2 id="welcomeMessage"></h2>
  </section>

  <!-- Admin Section -->
  <div id="adminSection" style="display:none; margin-top: 20px;">
    <h2>Admin Panel - Add Product</h2>

    <label for="productName">Product Name:</label><br />
    <input id="productName" placeholder="Name" /><br />

    <label for="productDesc">Description:</label><br />
    <textarea id="productDesc" placeholder="Description"></textarea><br />

    <label for="productPrice">Price in ETH:</label><br />
    <input id="productPrice" type="number" placeholder="Price in ETH" step="0.0001" /><br />

    <label for="productImage">Product Image:</label><br />
    <input type="file" id="productImage" accept="image/*" /><br />

    <button type="button" onclick="addProduct()">Add Product</button>
  </div>

  <!-- Common Section for Both Roles -->
  <div id="productListSection" style="display:none; margin-top: 20px;">
    <h2>All Products</h2>
    <div id="products"></div>
  </div>

  <!-- Logout Button -->
  <div id="logoutSection" style="display:none; margin-top:20px;">
    <button type="button" onclick="logout()">Logout</button>
  </div>
  <div id="appFooter">
    Blockchain Product Review System &mdash; Powered by Ethereum Smart Contracts
  </div>

  <script src="app.js"></script>
</body>
</html>
